(this["webpackJsonpmarketplace-game-nfts"]=this["webpackJsonpmarketplace-game-nfts"]||[]).push([[16],{1099:function(e,t,a){},1106:function(e,t,a){},1110:function(e,t,a){"use strict";a.r(t);var c=a(95),n=a(0),s=a.n(n),i=a(176),r=a(13),o=a(947),l=a(2),d=a.n(l),u=a(116),j=a(1032),b=a(973),v=a(151),O=a(1045),h=a(1084),m=a(1020),f=a.n(m),x=a(1021),p=a.n(x),g=a(1122),w=(a(951),a.p+"static/media/D0xx39.5d8916.wallet-background.png"),N=a(1047),S={56:"https://bscscan.com",97:"https://testnet.bscscan.com"},T=a(950),A=a(25),y=function(e){var t,a=e.showModal,c=e.handleCloseModal,n=e.tx,s=Object(l.useContext)(T.b),i=Object(v.c)().chainId;return console.log(n),Object(l.useEffect)((function(){s.setIsModalOpen(a)}),[a]),Object(A.jsx)(g.a,{centered:!0,show:a,onHide:c,className:"modal-chose-wallet",children:Object(A.jsxs)("div",{className:"custom-popup",children:[Object(A.jsx)(g.a.Header,{closeButton:!0,children:Object(A.jsx)(g.a.Title,{children:" "})}),Object(A.jsxs)(g.a.Body,{children:[Object(A.jsxs)("div",{className:" transaction-log",children:[Object(A.jsxs)("h1",{children:[" ",null===n||void 0===n?void 0:n.transactionType," transaction"]}),Object(A.jsx)("div",{className:"image-log",children:Object(A.jsx)("img",{src:w,alt:"wallet bg"})}),Object(A.jsxs)("div",{className:"transaction-status",children:[Object(A.jsxs)("h6",{children:["Transaction ","success"===(null===n||void 0===n?void 0:n.status.toLowerCase())?"Succeeded":"Failed"," "]}),Object(A.jsxs)("div",{children:[" ","deposit"===(null===n||void 0===n?void 0:n.transactionType.toLowerCase())?"+":"-"," ",null===n||void 0===n?void 0:n.amountReceived," ","KGT"," "]})]}),Object(A.jsx)("div",{className:"transaction-info",children:Object(A.jsxs)("ul",{children:[Object(A.jsxs)("li",{children:[Object(A.jsx)("h6",{children:"Sender"}),Object(A.jsx)(N.CopyToClipboard,{text:null===n||void 0===n?void 0:n.fromAddress,children:Object(A.jsx)("p",{children:"".concat(null===n||void 0===n?void 0:n.fromAddress.substring(0,8),"...").concat(null===n||void 0===n?void 0:n.fromAddress.substring((null===n||void 0===n?void 0:n.fromAddress.length)-4))})})]}),Object(A.jsxs)("li",{children:[Object(A.jsx)("h6",{children:"Recipient "}),Object(A.jsx)(N.CopyToClipboard,{text:null===n||void 0===n?void 0:n.toAddress,children:Object(A.jsxs)("p",{children:["".concat(null===n||void 0===n?void 0:n.toAddress.substring(0,8),"...").concat(null===n||void 0===n?void 0:n.toAddress.substring((null===n||void 0===n?void 0:n.toAddress.length)-4))," "]})})]}),Object(A.jsxs)("li",{children:[Object(A.jsx)("h6",{children:"Time"}),Object(A.jsx)("p",{children:Object(A.jsx)(f.a,{format:"YYYY-MM-DD h:mm:ss",children:new Date((null===n||void 0===n?void 0:n.timestamp)||Date.now()).toString()})})]}),Object(A.jsxs)("li",{children:[Object(A.jsx)("h6",{children:" Transaction ID "}),Object(A.jsx)(N.CopyToClipboard,{text:null===n||void 0===n?void 0:n.tx,children:Object(A.jsx)("a",{href:(t=null===n||void 0===n?void 0:n.tx,"".concat(S[i],"/tx/").concat(t)),target:"_blank",rel:"noreferrer",children:"".concat(null===n||void 0===n?void 0:n.tx.substring(0,8),"...").concat(null===n||void 0===n?void 0:n.tx.substring((null===n||void 0===n?void 0:n.tx.length)-4))})})]})]})})]}),Object(A.jsx)("div",{className:"divider-end"})]})]})})},C=a(1004),R=(a(1099),a(1006)),k=a(1100),E=a.n(k),I=a(1124),D=a(1121),P=function(e){e.network,e.setNetwork;var t=Object(l.useState)({copied:!1,message:""}),a=Object(o.a)(t,2),c=a[0],n=a[1],s="development";return console.log(s),Object(A.jsxs)("div",{className:"column-flex-center ",children:[Object(A.jsx)("div",{className:"column-flex-center "}),Object(A.jsxs)("div",{className:"system-address",children:[Object(A.jsx)(E.a,{size:200,value:R.a}),Object(A.jsxs)("div",{className:"text-address column-flex-center",children:[Object(A.jsx)("h6",{children:R.a}),Object(A.jsxs)("p",{children:["Note: Address only accepts ",Object(A.jsx)("strong",{children:"KGT"})," "]}),Object(A.jsx)(I.a,{placement:"top",overlay:Object(A.jsx)(D.a,{id:"tooltip-".concat("top"),children:c.message}),children:Object(A.jsx)(N.CopyToClipboard,{onCopy:function(){return n({copied:!0,message:"copied"})},text:R.a,children:Object(A.jsx)(h.a,{className:"wallet-action-btn color-btn mt-4",children:"copy address"})})},"top")]})]})]})},L=a(1053),M=a(993),H=a(991),Y=a(249),F=a(949),K=a(1041),z=function(e){var t=e.network,a=(e.setNetwork,e.addTransaction),c=e.transactionType,n=Object(l.useRef)(null),i=Object(l.useRef)(null),d=Object(u.e)(b.a);console.log(d);var j=Object(l.useState)(0),v=Object(o.a)(j,2)[1],O=Object(l.useState)(null),m=Object(o.a)(O,2),f=m[0],x=m[1],p=function(){var e=Object(r.a)(s.a.mark((function e(){var r,o,l,d,u,j,b,O,h,m,f,x;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(K.b)();case 3:return l=e.sent,d={toAddress:n.current.value,value:Number(i.current.value),networkId:t},u={sign:null===(r=l.data)||void 0===r?void 0:r.signature,message:null===(o=l.data)||void 0===o?void 0:o.message},e.next=8,C.a.addWithdrawTransaction(u,d);case 8:"success"===(j=e.sent).status?(Y.b.info(F.a.SUCCESS.default),a({amount:null===(b=j.data)||void 0===b?void 0:b.amountReceived,from:null===(O=j.data)||void 0===O?void 0:O.fromAddress,fee:null===(h=j.data)||void 0===h?void 0:h.fee,to:null===(m=j.data)||void 0===m?void 0:m.toAddress,transactionType:c.withdraw,transactionHash:null===(f=j.data)||void 0===f?void 0:f.tx}),v(null===(x=j.data)||void 0===x?void 0:x.amountReceived)):Y.b.error(j.data),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),Y.b.error(F.a.ERROR.default);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"column-flex-center  ",children:[Object(A.jsx)("div",{className:"column-flex-left width-600 "}),Object(A.jsx)("div",{className:"system-address",children:Object(A.jsxs)("div",{className:" column-flex-right",children:[Object(A.jsxs)(L.a,{children:[Object(A.jsx)(L.a.Label,{children:" Recipient "}),Object(A.jsx)(M.a,{children:Object(A.jsx)(H.a,{ref:n,defaultValue:null===d||void 0===d?void 0:d.address,disabled:!0})})]}),Object(A.jsxs)(L.a,{children:[Object(A.jsx)(L.a.Label,{children:" Amount (2000 - 100000 KGT) "}),Object(A.jsx)(M.a,{children:Object(A.jsx)(H.a,{onKeyPress:function(e){/[0-9]/.test(e.key)&&0!==e.target.value||e.preventDefault()},onInput:function(e){return function(e){console.log(e),console.log(e.target.value),0===+e.target.value?(console.log("da chay"),x("")):x(e.target.value)}(e)},value:f,type:"number",ref:i})})]}),Object(A.jsxs)("div",{className:"column-flex-right-children",children:[Object(A.jsx)("span",{children:"FEES: 60 KGT"}),Object(A.jsx)(h.a,{onClick:p,className:"wallet-action-btn color-btn mt-3",children:"Send"})]})]})})]})},_=a(138),U=a(250),B=a(74),G=a.n(B),W=(a(1106),function(e){var t=function(e,t){if(0===e)return[];var a=[{value:1,active:!1},{value:2,active:!1},{value:3,active:!1},{value:4,active:!1},{value:5,active:!1},{value:6,active:!1},{value:7,active:!1}];return e<=7?((a=a.slice(0,+e))[t-1]?a[t-1].active=!0:a[0].active=!0,a):+t<5?(a[t-1].active=!0,a[5].value="...",a[6].value=e,a):+t+4>+e?(a[1].value="...",a[6].value=e,a[5].value=+e-1,a[4].value=+e-2,a[3].value=+e-3,a[2].value=+e-4,a[6-e+t]?a[6-e+t].active=!0:a[0].active=!0,a):(a[1].value="...",a[2].value=+t-1,a[3].value=t,a[4].value=+t+1,a[5].value="...",a[6].value=e,a[3].active=!0,a)},a=Object(l.useState)([]),c=Object(o.a)(a,2),n=c[0],s=c[1],i=Object(l.useState)(1),r=Object(o.a)(i,2),u=r[0],j=r[1],b=Object(l.useState)(e.totalPage),v=Object(o.a)(b,2),O=v[0],h=v[1];return Object(l.useEffect)((function(){s((function(){return t(e.totalPage,e.currentPage)})),h(e.totalPage),j(e.currentPage)}),[e.totalPage,e.currentPage]),Object(A.jsxs)("div",{className:"common-pagination",children:[Object(A.jsx)("span",{onClick:function(){1!==u&&(s((function(){return t(O,+u-1)})),j(+u-1),e.handlePageChange(u-1))},className:"common-pagination-button",children:"PREV"}),n.map((function(a,c){return Object(A.jsx)(d.a.Fragment,{children:Object(A.jsx)("span",{value:a.value,onClick:function(){"..."!==a.value&&(j(a.value),s((function(){return t(O,+a.value)})),e.handlePageChange(a.value))},style:{color:a.active&&"yellow"},className:"common-pagination-page",children:a.value})},"common-pagination".concat(c))})),Object(A.jsx)("span",{onClick:function(){+u>=O||(s((function(){return t(O,+u+1)})),j(+u+1),e.handlePageChange(u+1))},className:"common-pagination-button",children:"NEXT"})]})}),V={deposit:"deposit",withdraw:"withdraw"},J=1,X={networkId:J,pageSize:10,pageNumber:1,loading:!0,totalItem:10},q=function(e){var t=Object(u.d)(),a=Object(u.e)(b.a),n=Object(l.useState)(J),d=Object(o.a)(n,2),m=d[0],x=d[1],g=Object(v.c)().account,w=Object(l.useState)(5),N=Object(o.a)(w,1)[0],S=Object(l.useState)(-1),T=Object(o.a)(S,2),k=T[0],E=T[1],I=Object(l.useState)([]),D=Object(o.a)(I,2),L=D[0],M=D[1],H=Object(l.useState)(X),Y=Object(o.a)(H,2),F=Y[0],K=Y[1],B=Object(l.useState)(V.deposit),q=Object(o.a)(B,2),Q=q[0],Z=q[1],$=Object(l.useState)(1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ce=Object(l.useState)(1),ne=Object(o.a)(ce,2),se=ne[0],ie=ne[1],re=Object(l.useRef)(),oe=Object(l.useRef)(null);Object(l.useEffect)((function(){ue()}),[L,F,m,g]),Object(l.useEffect)((function(){le(1),ae(1)}),[Q,a]);var le=function(){var e=Object(r.a)(s.a.mark((function e(t){var a,c,n,r,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.getAllTransactions({networkId:m,pageSize:X.pageSize,pageNumber:t,transactionType:Q,address:g});case 3:"success"===(a=e.sent).status&&(M(Object(i.a)(null===(c=a.data)||void 0===c?void 0:c.data)),K({pageNumber:null===(n=a.data)||void 0===n?void 0:n.pagination.pageNumber,pageSize:X.pageSize,totalItem:null===(r=a.data)||void 0===r?void 0:r.pagination.totalItem,loading:X.pageSize<(null===(o=a.data)||void 0===o?void 0:o.pagination.totalItem)}),ie(Math.ceil((null===(l=a.data)||void 0===l?void 0:l.pagination.totalItem)/X.pageSize))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),de=function(e){var n,s={amountReceived:e.amount,fee:e.fee||(null===(n=L[0])||void 0===n?void 0:n.fee)||0,fromAddress:e.from,networkId:m,status:"SUCCESS",timestamp:Date.now(),toAddress:e.to,transactionType:e.transactionType,tx:e.transactionHash};t(V.deposit===s.transactionType?Object(j.a)(Object(c.a)(Object(c.a)({},a),{},{amount:+(null===a||void 0===a?void 0:a.amount)+ +(null===s||void 0===s?void 0:s.amountReceived)-s.fee})):Object(j.a)(Object(c.a)(Object(c.a)({},a),{},{amount:(null===a||void 0===a?void 0:a.amount)-(null===s||void 0===s?void 0:s.amountReceived)-s.fee}))),L.unshift(s),M(Object(i.a)(L))},ue=function(){var e=Object(r.a)(s.a.mark((function e(){var t,a,c,n,i,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)();case 2:return t=e.sent,a=t.chainId,c=t.getContractAsync,e.next=7,Object(_.b)(a);case 7:return n=e.sent,e.next=10,c(n,Object(_.a)(a).KABY_GAME_TOKEN_ABI);case 10:if(i=e.sent,r=i.contract,oe.current&&oe.current.unsubscribe(),Q===V.deposit){e.next=16;break}return oe.current=null,e.abrupt("return");case 16:oe.current=r.events.Transfer({filter:{from:g,to:R.a}}),o=[],oe.current.on("data",(function(e){var t=e.returnValues,a=t.value,c=t.from,n=t.to;console.log("Receive event",e),o.find((function(t){return t.transactionHash===e.transactionHash&&t.id===e.id}))||(o.push(e),de({amount:G.a.utils.fromWei(a),from:c,to:n,transactionType:V.deposit,transactionHash:e.transactionHash}))}));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[g&&Object(A.jsx)(y,{tx:L[k]||null,showModal:k>=0,handleCloseModal:function(){return E(-1)}}),Object(A.jsxs)("div",{className:"account-wrapper",children:[Object(A.jsx)("div",{className:"bg-fade-layer1"}),Object(A.jsx)("div",{className:"bg-fade-layer2"}),Object(A.jsx)("div",{className:"bg-fade-layer3"}),Object(A.jsx)("div",{className:"bg-head"}),Object(A.jsxs)("div",{className:"account-tab",children:[Object(A.jsx)(O.a,{className:"system-action",children:Object(A.jsxs)("div",{className:"wallet-action",children:[Object(A.jsxs)("div",{className:"wallet-action-wrap",children:[Object(A.jsx)("h2",{style:{cursor:"pointer"},onClick:function(){return Z(V.deposit)},className:"wallet-action-title ".concat(Q===V.deposit?"active":""),children:"Deposit"}),Object(A.jsx)("h2",{style:{cursor:"pointer"},onClick:function(){return Z(V.withdraw)},className:"wallet-action-title ".concat(Q===V.withdraw?"active":""),children:"withdraw"})]}),Q===V.withdraw&&Object(A.jsx)(z,{network:m,setNetwork:x,addTransaction:de,transactionType:V}),Q===V.deposit&&Object(A.jsx)(P,{network:m,setNetwork:x})]})}),Object(A.jsxs)("div",{className:"system-transaction",children:[Object(A.jsx)(p.a,{ref:re,rows:N,className:"TableScrollbar",children:Object(A.jsxs)("table",{children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{className:"th1",children:"TYPE"}),Object(A.jsx)("th",{className:"th2",children:"TOTAL AMOUNT"}),Object(A.jsx)("th",{children:"TIME"}),Object(A.jsx)("th",{children:"STATUS"}),Object(A.jsx)("th",{children:"DETAILS"})]})}),Object(A.jsx)("tbody",{children:null===L||void 0===L?void 0:L.map((function(e,t){var a;return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{className:"td1 capitalize",children:e.transactionType}),Object(A.jsxs)("td",{className:"th2",children:[" ",e.amountReceived]}),Object(A.jsx)("td",{children:Object(A.jsx)(f.a,{format:"YYYY-MM-DD h:mm:ss",children:new Date(e.timestamp).toString()})}),Object(A.jsxs)("td",{className:"capitalize",children:[" ",null===(a=e.status)||void 0===a?void 0:a.toLowerCase()," "]}),Object(A.jsx)("td",{children:Object(A.jsx)(h.a,{className:"more-btn",onClick:function(){return E(t)},children:"More"})})]},"row-transaction-".concat(t))}))})]})}),Object(A.jsx)(W,{handlePageChange:function(e){le(e),ae(e)},currentPage:te,totalPage:se})]})]})]})]})};t.default=function(e){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(q,{})})}},949:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return n}));var c=function(e){var t=e.toFixed(2).replace(/./g,(function(e,t,a){return t>0&&"."!==e&&(a.length-t)%3===0?","+e:e}));return"".concat(t).split(".")[0]},n={WARNING:{LOGIN:"You must connect wallet first !",LOAD_DATA:"waiting to load data !",APPROVING:"Approving",default:"Have a transaction is pending!"},SUCCESS:{APPROVED:"Approve successful!",OK:"OK !",CANCEL_OFFER:"Cancel Offer Successful!",OFFER:"Offered Successful!",TAKE_OFFER:"Accepted Offer!",DELIST:"Delist Hero Successful!",LIST:"List Hero Successful!",BUY:"Bought Hero Successful!",default:"Transaction is successful!",ITEMBUY:"Bough Item Successful!",ITEMLIST:"List Item Successful!",ITEMDELIST:"Delist Item Successful!",STAKE:"Stake Token Successful!",UNSTAKE:"Unstake Token Successful!",CLAIM_REWARD:"Claim reward Successful!",WITHDRAW:"Withdraw Successful!"},ERROR:{default:"ERROR !",LOAD_APPROVE_ERROR:"Loading Approve info is error !"}};new Date("10/15/2021")}}]);
//# sourceMappingURL=HPwBJc.a7754c.16.chunk.js.map